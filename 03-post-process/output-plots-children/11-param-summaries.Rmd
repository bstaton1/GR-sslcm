---
editor_options: 
  chunk_output_type: console
---

# Parameter Summaries {.tabset .tabset-dropdown}

```{r my-boxplot-function}
my_boxplot = function(params, ylab = NULL, ticklabs = pops, ylim = NULL, boxfill = alpha("salmon", 0.5), border = alpha("red", 0.5), ...) {
  # extract posterior samples and rename them
  post_sub = post_subset(post, params, matrix = TRUE)
  
  if (ncol(post_sub) >= 2) {
    colnames(post_sub) = ticklabs
  }

  # initialize a boxplot object
  bp = boxplot(post_sub, plot = FALSE)
  
  # replace the summary stats with my preferred quantiles
  par(mar = c(5,3,1,1), mgp = c(2,0.35,0), tcl = -0.15)
  bp$stats = apply(post_sub, 2, function(x) quantile(x, c(0.025, 0.25, 0.5, 0.75, 0.975)))
  bxp(bp, ylab = ylab, xlab = "", outline = FALSE, ylim = ylim, ...,
      staplelty = 0, whisklty = 1, boxfill = boxfill, boxcol = border, medcol = border, whiskcol = border)
} 
```

## Parr Recruitment

```{r recruit-bxp, fig.width = 8, fig.height = 3.5}
par(mfrow = c(1,5))
my_boxplot("^alpha[.]$", "Productivity")
my_boxplot("^beta[.]$", "Capacity")
my_boxplot("^sig_Lphi_E_Pb[.]$", "Process SD")
my_boxplot("^kappa_phi_E_Pb[.]$", "AR(1) Coef.")
my_boxplot("^rho_Lphi_E_Pb", "Among-pop Correlation", ticklabs = vcov_labels, las = 3)
```

## Summer Parr Size

```{r summer-size-bxp, fig.width = 8, fig.height = 3.5}
par(mfrow = c(1,4))
my_boxplot("^omega0[.]$", "Intercept")
my_boxplot("^omega1[.]$", "Slope")
my_boxplot("^sig_lL_Pb[.]$", "Process SD")
my_boxplot("^rho_lL_Pb", "Among-pop Correlation", ticklabs = vcov_labels, las = 3)
```

## Life History Apportionment

```{r LH-type-bxp, fig.width = 8, fig.height = 3.5}
par(mfrow = c(1,3))
my_boxplot("^mu_pi[1,.]$", "Mean Proportion Fall Migrants")
my_boxplot("^sig_Lpi[.]$", "Process SD")
my_boxplot("^rho_Lpi", "Among-pop Correlation", ticklabs = vcov_labels, las = 3)
```

## Overwinter Survival {.tabset .tabset-pills}

### Logistic Function Parameters

```{r overwinter-survival-bxp1, fig.width = 8, fig.height = 3.5}
par(mfrow = c(1,3))
my_boxplot(sub_index("gamma0[LH_type,pop]", LH_type = i_fall, pop = "."), "Intercept (Fall)")
my_boxplot(sub_index("gamma0[LH_type,pop]", LH_type = i_spring, pop = "."), "Intercept (Spring)")
my_boxplot(sub_index("gamma1[LH_type,pop]", LH_type = i_spring, pop = "."), "Slope")
```

### Process SD

```{r overwinter-survival-bxp2, fig.width = 8, fig.height = 3.5}
par(mfrow = c(1,2))
my_boxplot(sub_index("sig_Lphi_Pa_Mb[pop,LH_type]", LH_type = i_fall, pop = "."), "Process SD (Fall)")
my_boxplot(sub_index("sig_Lphi_Pa_Mb[pop,LH_type]", LH_type = i_spring, pop = "."), "Process SD (Spring)")
```

### Among-pop Correlation

```{r overwinter-survival-bxp3, fig.width = 8, fig.height = 3.5}
par(mfrow = c(1,2))
my_boxplot(sub_index("rho_Lphi_Pa_Mb[.,.,LH_type]", LH_type = i_fall), "Among-pop Correlation (Fall)", ticklabs = vcov_labels, las = 3)
my_boxplot(sub_index("rho_Lphi_Pa_Mb[.,.,LH_type]", LH_type = i_spring), "Among-pop Correlation (Spring)", ticklabs = vcov_labels, las = 3)
```

## Movement Survival to LGR {.tabset .tabset-pills}

### Mean/Logistic Model Parameters

```{r trib-to-lgr-bxp1, fig.width = 8, fig.height = 3.5}
par(mfrow = c(1,3))
my_boxplot(sub_index("tau0[pop]", pop = "."), "Intercept", main = "NOR", ylim = c(0,1))
my_boxplot(sub_index("tau1[pop]", pop = "."), "Slope", main = "NOR", ylim = c(0,1))
my_boxplot(sub_index("mu_phi_Mb_Ma[LH_type,origin,pop]", LH_type = i_spring, origin = o_hor, pop = "."), "Average Migration Survival", main = "HOR", ylim = c(0,1))
```

### Process SD

```{r trib-to-lgr-bxp2, fig.width = 8, fig.height = 3.5}
par(mfrow = c(1,2))
my_boxplot(sub_index("sig_Lphi_Mb_Ma[pop,origin]", origin = o_nor, pop = "."), "Process SD", main = "NOR")
my_boxplot(sub_index("sig_Lphi_Mb_Ma[pop,origin]", origin = o_hor, pop = "."), "Process SD", main = "HOR")
```

### Among-pop Correlation

```{r trib-to-lgr-bxp3, fig.width = 8, fig.height = 3.5}
par(mfrow = c(1,2))
my_boxplot(sub_index("rho_Lphi_Mb_Ma[.,.,origin]", origin = o_nor), "Among-pop Correlation (NOR)", ticklabs = vcov_labels, las = 3)
my_boxplot(sub_index("rho_Lphi_Mb_Ma[.,.,origin]", origin = o_hor), "Among-pop Correlation (HOR)", ticklabs = vcov_labels, las = 3)
```

## Movement Survival to Ocean

```{r lgr-to-ocean-bxp}
par(mfrow = c(1,3))
my_boxplot(sub_index("mu_phi_Ma_O0[origin]", origin = "."), "Average Migration Survival", ylim = c(0,1), ticklab = origins)
my_boxplot(sub_index("sig_Lphi_Ma_O0[origin]", origin = "."), "Process SD", ylim = c(0,1), ticklab = origins)
my_boxplot(sub_index("rho_Lphi_Ma_O0[2,1]"), "Among-origin Correlation", ylim = c(-1,1), ticklab = c(""))
```

## Probability of Maturing at Age-3 {.tabset .tabset-pills}

### Means

```{r age3-mean-bxp, fig.width = 8, fig.height = 3.5}
par(mfrow = c(1,2))
my_boxplot(sub_index("mu_psi_O1[origin,pop]", origin = o_nor, pop = "."), "", main = "NOR", ylim = c(0,1))
my_boxplot(sub_index("mu_psi_O1[origin,pop]", origin = o_hor, pop = "."), "", main = "HOR", ylim = c(0,1))
```

### Process SD

```{r age3-sd-bxp, fig.width = 8, fig.height = 3.5}
par(mfrow = c(1,2))
my_boxplot(sub_index("sig_Lpsi_O1[pop,origin]", origin = o_nor, pop = "."), "", main = "NOR")
my_boxplot(sub_index("sig_Lpsi_O1[pop,origin]", origin = o_hor, pop = "."), "", main = "HOR")
```

### Among-pop Correlation

```{r age3-rho-bxp, fig.width = 8, fig.height = 3.5}
par(mfrow = c(1,2))
my_boxplot(sub_index("rho_Lpsi_O1[.,.,origin]", origin = o_nor), "Among-pop Correlation (NOR)", ticklabs = vcov_labels, las = 3)
my_boxplot(sub_index("rho_Lpsi_O1[.,.,origin]", origin = o_hor), "Among-pop Correlation (HOR)", ticklabs = vcov_labels, las = 3)
```

## Probability of Maturing at Age-4 {.tabset .tabset-pills}

### Means

```{r age4-mean-bxp, fig.width = 8, fig.height = 3.5}
par(mfrow = c(1,2))
my_boxplot(sub_index("mu_psi_O2[origin,pop]", origin = o_nor, pop = "."), "", main = "NOR", ylim = c(0,1))
my_boxplot(sub_index("mu_psi_O2[origin,pop]", origin = o_hor, pop = "."), "", main = "HOR", ylim = c(0,1))
```

### Process SD

```{r age4-sd-bxp, fig.width = 8, fig.height = 3.5}
par(mfrow = c(1,2))
my_boxplot(sub_index("sig_Lpsi_O2[pop,origin]", origin = o_nor, pop = "."), "", main = "NOR")
my_boxplot(sub_index("sig_Lpsi_O2[pop,origin]", origin = o_hor, pop = "."), "", main = "HOR")
```

### Among-pop Correlation

```{r age4-rho-bxp, fig.width = 8, fig.height = 3.5}
par(mfrow = c(1,2))
my_boxplot(sub_index("rho_Lpsi_O2[.,.,origin]", origin = o_nor), "Among-pop Correlation (NOR)", ticklabs = vcov_labels, las = 3)
my_boxplot(sub_index("rho_Lpsi_O2[.,.,origin]", origin = o_hor), "Among-pop Correlation (HOR)", ticklabs = vcov_labels, las = 3)
```

## Ocean Survival {.tabset .tabset-pills}

### Year 1 {.tabset .tabset-pills}

#### Mean

```{r yr1-ocean-bxp, fig.width = 8, fig.height = 3.5}
par(mfrow = c(1,2))
my_boxplot(sub_index("mu_phi_O0_O1[origin,pop]", origin = o_nor, pop = "."), main = "NOR", ylim = c(0,1), ylab = "Average Survival")
my_boxplot(sub_index("mu_phi_O0_O1[origin,pop]", origin = o_hor, pop = "."), main = "HOR", ylim = c(0,1), ylab = "Average Survival")
```

#### Process SD and Correlation

```{r yr1-ocean-bxp2, fig.width = 8, fig.height = 3.5}
par(mfrow = c(1,3))
my_boxplot(sub_index("sig_Lphi_O0_O1[pop]", pop = "."), ylab = "Process SD")
my_boxplot(sub_index("kappa_phi_O0_O1[pop]", pop = "."), ylab = "Autocorrelation")
my_boxplot("rho_Lphi_O0_O1[", ticklabs = vcov_labels, ylab = "Among-pop Correlation", ylim = c(-1,1), las = 2)
```

### Year 2 {.tabset .tabset-pills}

```{r yr2-ocean-bxp, fig.width = 8, fig.height = 3.5}
par(mfrow = c(1,2))
my_boxplot(sub_index("mu_phi_O1_O2[origin,pop]", origin = o_nor, pop = "."), main = "NOR", ylim = c(0,1), ylab = "Average Survival")
my_boxplot(sub_index("mu_phi_O1_O2[origin,pop]", origin = o_hor, pop = "."), main = "HOR", ylim = c(0,1), ylab = "Average Survival")
```

### Year 3 {.tabset .tabset-pills}

```{r yr3-ocean-bxp, fig.width = 8, fig.height = 3.5}
par(mfrow = c(1,2))
my_boxplot(sub_index("mu_phi_O2_O3[origin,pop]", origin = o_nor, pop = "."), main = "NOR", ylim = c(0,1), ylab = "Average Survival")
my_boxplot(sub_index("mu_phi_O2_O3[origin,pop]", origin = o_hor, pop = "."), main = "HOR", ylim = c(0,1), ylab = "Average Survival")
```

### NOR:HOR Log Odds Ratios

```{r ocean-surv-scaler, fig.width = 8, fig.height = 3.5}
par(mfrow = c(1,3))
my_boxplot(sub_index("delta_O0_O1[pop]", pop = "."), ylab = "Log Odds Ratio", main = "Year 1")
my_boxplot(sub_index("delta_O1_O2[pop]", pop = "."), ylab = "Log Odds Ratio", main = "Year 2")
my_boxplot(sub_index("delta_O2_O3[pop]", pop = "."), ylab = "Log Odds Ratio", main = "Year 3")
```

## Movement Survival BON to LGR

```{r bon-to-lgr-bxp}
par(mfrow = c(1,3))
my_boxplot(sub_index("mu_phi_Rb_Ra[origin]", origin = "."), "Average Migration Survival", ylim = c(0,1), ticklab = origins)
my_boxplot(sub_index("sig_Lphi_Rb_Ra[origin]", origin = "."), "Process SD", ticklab = origins)
my_boxplot(sub_index("rho_Lphi_Rb_Ra[2,1]"), "Among-origin Correlation", ylim = c(-1,1), ticklab = c(""))
```

## Pre-spawn Survival

```{r prespawn-surv-bxp}
par(mfrow = c(1,3))
my_boxplot(sub_index("mu_phi_Sb_Sa[pop]", pop = "."), "Average Survival", ylim = c(0,1))
my_boxplot(sub_index("sig_Lphi_Sb_Sa[pop]", pop = "."), "Process SD")
my_boxplot("rho_Lphi_Sb_Sa", "Among-pop Correlation", ylim = c(-1,1), ticklab = vcov_labels)
```

