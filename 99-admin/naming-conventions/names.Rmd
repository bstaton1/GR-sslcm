---
title: "Naming Conventions for GRSSLCM"
subtitle: "Grande Ronde State-Space Life Cycle Model"
output: html_document
---

```{r directories, include = F}
# set root directory to the project directory: two levels up from this location
knitr::opts_knit$set(root.dir = "../../")
```

```{r pkg-and-options, include = F}
# load packages
source("00-packages.R")

# set global knitting options
opts_chunk$set(echo = F)
```

# General Conventions:

*  $P$ is used for parr (first year freshwater juveniles)
*  $M$ is used for smolt (second year freshwater juveniles)
*  $O$ is used for ocean juveniles
*  $R$ is used for returning adults
*  $S$ is used for spawning adults
*  $b$ is used to denote "before migration" 
*  $a$ is used to denote "after migration"
*  $\phi$ is used to denote a survival term, subscripts used to denote the from/to states
*  $\psi$ is used to denote maturation from ocean juvenile to returning adult (no distinction between jacks and adults because they are all sexually mature)
*  $\dot{x}$ is used to denote that $x$ is an observed quantity (data)
*  $L$ (uppercase) is used to denote that the quantity has been logit-tranformed, $l$ (lowercase) is used to denote that the quantity has been log-transformed.
*  $y$ represents brood year fish were spawned; $t$ represents return year for adults

**Notes following 7/10/2020 Call**

*  May wish to consider replacing $\phi$ with $\mathrm{surv}$ and $\psi$ with $\mathrm{mat}$.
*  May wish to consider replacing $M$ with $SM$ and $S$ with $SP$
    *  If all other variables (abundance states) are one letter long, would this confuse readers making them think about multiplication?
*  Overall, we agreed this conventional structure is good for now, and we can revise if we find it too cumbersome or reviewers find it confusing
*  It has the advantage of consistency in naming logic

# Specific Conventions {.tabset .tabset-dropdown}

```{r read-manip-table}
# raw input file
tab = read.csv("99-admin/naming-conventions/names.csv", allowEscapes = T, stringsAsFactors = F)

# mark it up
tab$code = paste0("`", tab$code, "`")
tab$symbol = paste0("$", tab$symbol, "$")

# edit column names
colnames(tab) = c("", "In Code", "Symbol", "Description", "Notes")
```

```{r create-table-fun}
# function to create a table based on the type of quantity
create_table = function(group) {
  kable(tab[tab[,1] == group,-1], format = "html", escape = F, row.names = F) %>%
    kable_styling(full_width = F, bootstrap_options = c("condensed", "striped"))
}
```

_NOTE_: From a hierarchical perspective, the tables below only include the lowest level of the hierarchy (where applicable), e.g., the year- and population-specific quantity. See the next section for naming conventions for higher levels in the hierarchy.

_NOTE_: The "code" column specifies how the variables/parameters will be referred to in the JAGS model code and post-processing code, not necessarily the same as the raw data or preparation of raw data code.

## Indices

`r create_table("Indices")`

## Adult States

`r create_table("Adult States")`

## FW Juv States

`r create_table("FW Juv States")`

## SW Juv States

`r create_table("SW Juv States")`

## Survival

`r create_table("Survival")`

## Maturation

`r create_table("Maturation")`

## Recruitment Function

`r create_table("Recruitment Function")`

## Density-Dependent Survival

`r create_table("Density-Dependent Survival")`

## Data: FW Juv Survival

`r create_table("Data: FW Juv Survival")`

## Data: FW Juv Abundance

`r create_table("Data: FW Juv Abundance")`

## Data: Adult Abundance

`r create_table("Data: Adult Abundance")`

## Data: Adult Composition

`r create_table("Data: Adult Composition")`

# Higher-Level Conventions

For the hyper-distributions controlling the between-population and within-population mean and variances, here's one proposition using survival term for spring migration to LGD as an example.

*  The **mean across populations**
    * e.g., $\mu_{L\phi_{Mb \rightarrow Ma}}$ (`MU_Lphi_Mb_Ma`)
*  The **SD across populations**
    * e.g., $\sigma_{L\phi_{Mb \rightarrow Ma}}$ (`SIG_Lphi_Mb_Ma`)
*  The **mean across years within each population**
    * e.g., $\mu_{L\phi_{Mb \rightarrow Ma, j}}$ (`mu_Lphi_Mb_Ma[j]`)
*  The **SD across years within a population**
    * e.g., $\sigma_{L\phi_{Mb \rightarrow Ma, j}}$ (`sig_Lphi_Mb_Ma[j]`)
